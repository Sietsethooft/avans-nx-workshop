<div *ngIf="isLoading" class="container p-3">
    <div class="row">
      <div class="col-xl-4">
        <div class="card mb-4 mb-xl-0">
          <div class="card-header" style="background-color: #435d7d; color: white;"><h4>Bandfoto</h4></div>
          <div class="card-body text-center">
            <img
              class="img-account-profile mb-2"
              src="https://utaten.com/karaoke/wp-content/uploads/2018/09/image2-21.jpg"
              alt="Bandfoto"
              style="width: 100%; height: 225px;"
            >
          </div>
        </div>
      </div>
      <div class="col-xl-8">
        <div class="card mb-4">
          <div class="card-header" style="background-color: #435d7d; color: white;">
            <h4>Bandgegevens</h4>
          </div>
          <div class="d-flex justify-content-center align-items-center" style="height: 200px;">
            <div class="spinner-border text-primary m-2" role="status" style="width: 3rem; height: 3rem;">
                <span class="sr-only"></span>
            </div>
            <p class="mb-0" style="font-size: 1.5rem;">Gegevens worden geladen...</p>
            </div>
        </div>
      </div>
    </div>
  </div>
  
  <div *ngIf="!isLoading" class="container p-3">
    <div class="row">
      <div class="col-xl-4">
        <div class="card mb-4 mb-xl-0">
          <div class="card-header" style="background-color: #435d7d; color: white;"><h4>Bandfoto</h4></div>
          <div class="card-body text-center">
            <img class="img-account-profile mb-2" [src]="band.profileImgUrl || 'https://utaten.com/karaoke/wp-content/uploads/2018/09/image2-21.jpg'" alt="Bandfoto" style="width: 100%; height: 225px;">
            <div></div>
            <button class="btn btn-primary mt-3" data-bs-toggle="modal" data-bs-target="#uploadPhotoModal">
              Upload nieuwe foto
            </button>
          </div>
        </div>
      </div>
    
      <div class="col-xl-8">
        <div class="card mb-4">
          <div class="card-header" style="background-color: #435d7d; color: white;"><h4>Bandgegevens</h4></div>
          <div class="card-body">
            <form [formGroup]="bandForm" (ngSubmit)="onSave()">
                <div class="row mb-3">
                  <div class="col-md-6">
                    <label class="fs-4 mb-1" for="inputName">Naam:</label>
                    <input class="form-control" id="inputName" type="text" formControlName="name">
                    <div *ngIf="bandForm.get('name')?.invalid && bandForm.get('name')?.touched" class="text-danger">
                      Naam moet minimaal 5 letters bevatten.
                    </div>
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-md-12">
                    <label class="fs-4 mb-1" for="inputDescription">Beschrijving:</label>
                    <textarea class="form-control" id="inputDescription" formControlName="description" rows="4"></textarea>
                    <div *ngIf="bandForm.get('description')?.invalid && bandForm.get('description')?.touched" class="text-danger">
                      Beschrijving moet minimaal 10 letters bevatten.
                    </div>
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-md-6">
                    <label class="fs-4 mb-1" for="inputFrequencyRepetition">Hoeveelheid repetities:</label>
                    <select class="form-control" id="inputFrequencyRepetition" formControlName="frequencyRepetition">
                      <option *ngFor="let frequency of frequencies" [value]="frequency">{{ frequency }}</option>
                    </select>
                    <div *ngIf="bandForm.get('frequencyRepetition')?.invalid && bandForm.get('frequencyRepetition')?.touched" class="text-danger">
                      Kies een hoeveelheid repetities.
                    </div>
                  </div>
                  <div class="col-md-6">
                    <label class="fs-4 mb-1" for="inputRegion">Regio:</label>
                    <input class="form-control" id="inputRegion" type="text" formControlName="region">
                    <div *ngIf="bandForm.get('region')?.invalid && bandForm.get('region')?.touched" class="text-danger">
                      Regio moet minimaal 2 letters bevatten.
                    </div>
                  </div>
                </div>
                <div class="row mb-2">
                  <div class="col-md-6">
                    <label class="fs-4 mb-1">Leider:</label>
                    <p class="form-control-plaintext p-0 ml-s">{{ leader?.name }}</p>
                  </div>
                  <div class="col-md-6">
                    <label class="fs-4 mb-1" for="inputGenres">Genres:</label>
                    <input class="form-control" id="inputGenres" type="text" formControlName="genres">
                    <small class="form-text text-muted mb-0">Graag een <span style="font-weight: 600;">komma</span> tussen elke genre.</small>
                    <div *ngIf="bandForm.get('genres')?.invalid && bandForm.get('genres')?.touched" class="text-danger">
                      Er moet minimaal één genre zijn.
                    </div>
                  </div>
                </div>
                <div class="row mb-3">
                  <div class="col-md-6">
                    <label class="fs-4 mb-1" for="inputMinAge">Minimale leeftijd:</label>
                    <input class="form-control" id="inputMinAge" type="number" formControlName="minAge">
                  </div>
                  <div class="col-md-6">
                    <label class="fs-4 mb-1" for="inputMinExperience">Minimale ervaring: (in jaren)</label>
                    <input class="form-control" id="inputMinExperience" type="number" formControlName="minExperience">
                  </div>
                </div>
                <div class="mb-3">
                  <button class="btn btn-primary" type="submit" [disabled]="bandForm.invalid">Opslaan</button>
                </div>
              </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Modal -->
  <div class="modal fade" id="uploadPhotoModal" tabindex="-1" aria-labelledby="uploadPhotoModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="uploadPhotoModalLabel">Upload nieuwe Bandfoto</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form [formGroup]="photoForm">
            <div class="mb-3">
              <label for="profileImgUrl" class="form-label">Profielafbeelding-URL</label>
              <input
                type="url"
                id="profileImgUrl"
                class="form-control"
                formControlName="profileImgUrl"
                placeholder="Voer een geldige URL in"
              >
              <div *ngIf="photoForm.get('profileImgUrl')?.invalid && photoForm.get('profileImgUrl')?.touched" class="text-danger mt-2">
                Voer een geldige URL in.
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuleren</button>
          <button type="button" class="btn btn-primary" [disabled]="photoForm.invalid" (click)="updatePhoto()" data-bs-dismiss="modal">Opslaan</button>
        </div>
      </div>
    </div>
  </div>